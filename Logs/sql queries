CREATE TABLE Airport(
	Airport_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Name VARCHAR(20) NOT NULL,
	City VARCHAR(30) NOT NULL,
	Country VARCHAR(30) NOT NULL,
	IATA_code VARCHAR(5) NOT NULL UNIQUE,
	ICAO_code VARCHAR(5) NOT NULL UNIQUE
);

CREATE TABLE Flight(
	Flight_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Dep_airport_ID INTEGER NOT NULL,
	Dep_time DATE NOT NULL,
	Arrival_airport_ID INTEGER NOT NULL,
	Arrival_time DATE NOT NULL,
	MON BOOLEAN NOT NULL,
	TUE BOOLEAN NOT NULL,
	WED BOOLEAN NOT NULL,
	THU BOOLEAN NOT NULL,
	FRI BOOLEAN NOT NULL,
	SAT BOOLEAN NOT NULL,
	SUN BOOLEAN NOT NULL,
	FOREIGN KEY(Dep_airport_ID) REFERENCES Airport(Airport_ID),
	FOREIGN KEY(Arrival_airport_ID) REFERENCES Airport(Airport_ID)
);

CREATE TABLE Airplane_type(
	Airplane_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Name VARCHAR(20) NOT NULL,
	Company VARCHAR(20) NOT NULL,
	Max_seats INTEGER NOT NULL
);

CREATE TABLE Airplane(
	Airplane_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Type INTEGER NOT NULL,
	No_of_seats INTEGER NOT NULL,
	FOREIGN KEY(Type) REFERENCES Airplane_type(Airplane_ID)
);

CREATE TABLE Schedule_instance(
	Schedule_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Scheduled_date DATE NOT NULL,
	No_of_Bseats INTEGER NOT NULL,
	No_of_Eseats INTEGER NOT NULL,
	Flight_ID INTEGER NOT NULL,
	Airplane_ID INTEGER NOT NULL,
	FOREIGN KEY(Flight_ID) REFERENCES Flight(Flight_ID),
	FOREIGN KEY(Airplane_ID) REFERENCES Airplane(Airplane_ID)
);

CREATE TABLE Fare(
	Fare_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	No_of_seats INTEGER(1) NOT NULL,
	Type VARCHAR(20) NOT NULL,
	Amount INTEGER(5) NOT NULL,
	Restrictions VARCHAR(30),
	Flight_inst_ID INTEGER NOT NULL,
	FOREIGN KEY(Flight_inst_ID) REFERENCES Schedule_instance(Schedule_ID)
);

CREATE TABLE Contact_details(
	Contact_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Email VARCHAR(40) NOT NULL,
	PHONE INTEGER(10) NOT NULL,
	Line1 VARCHAR(40) NOT NULL,
	Line2 VARCHAR(40),
	City VARCHar(40) NOT NULL,
	State VARCHAR(30) NOT NULL,
	Country VARCHAR(30) NOT NULL
);

CREATE TABLE Users(
	User_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	U_name VARCHAR(50) NOT NULL,
	Pass VARCHAR(1000) NOT NULL,
	Contact_det INTEGER NOT NULL,
	FOREIGN KEY(Contact_det) REFERENCES Contact_details(Contact_ID)
);	

CREATE TABLE Passenger(
	Passenger_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Passenger_name VARCHAR(40) NOT NULL,
	Type VARCHAR(40) NOT NULL,
	Seat_no VARCHAR(5) NOT NULL,
	User_ID INTEGER NOT NULL,
	Flight_inst_ID BIGINT NOT NULL,
	Email_ID VARCHAR(40) NOT NULL,
	Phone VARCHAR(10) NOT NULL,
	Age INTEGER NOT NULL,
	Sex VARCHAR(20) NOT NULL,
	FOREIGN KEY(User_ID) REFERENCES Users(User_ID),
	FOREIGN KEY(Flight_inst_ID) REFERENCES instances(Instance_ID),
);

CREATE TABLE Transaction(
	Transaction_ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	Date DATE NOT NULL,
	Mode_of_payment VARCHAR(40) NOT NULL,
	Amount INTEGER(10) NOT NULL,
	User_ID INTEGER NOT NULL,
	FOREIGN KEY(User_ID) REFERENCES Users(User_ID)
);